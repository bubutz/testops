git diff HEAD~1 HEAD -U9999 -- tmp/template.yml |
    awk '/^[ @+-][a-z].*:$/{gsub(/^[ @+-]/, ""); gsub(/:$/, ""); current=$0}
        /^[+-][ ]*- .*@/ && current{repos[current]=1}
        /^[+-][a-z].*:$/{gsub(/^[+-]/, ""); gsub(/:$/, ""); repos[$0]=1}
        END{for(r in repos) print r}'



---
aaa-repo1:
  members:
    - user1@example.com
    - user2@example.com
    - user3@example.com
aaa-repo2:
  members:
    - user1@example.com
    - user9@example.com
abc-repo1:
  members:
    - user3@example.com
    - user4@example.com
    - user9@example.com
    - user1@example.com
    - user3@example.com
    - user4@example.com
    - user9@example.com
    - user1@example.com
    - user3@example.com
    - user4@example.com
    - user9@example.com
    - user1@example.com
    - user3@example.com
    - user4@example.com
    - user9@example.com
    - user1@example.com
    - user3@example.com
    - user4@example.com
    - user9@example.com
    - user1@example.com
    - user3@example.com
    - user4@example.com
    - user9@example.com
    - user1@example.com
    - user3@example.com
    - user4@example.com
    - user9@example.com
    - user1@example.com
    - user3@example.com
    - user4@example.com
    - user9@example.com
    - user1@example.com
    - user3@example.com
    - user4@example.com
    - user9@example.com
    - user1@example.com
    - user3@example.com
    - user4@example.com
    - user9@example.com
    - user1@example.com
    - user3@example.com
    - user4@example.com
    - user9@example.com
    - user1@example.com
    - user3@example.com
    - user4@example.com
    - user9@example.com
    - user1@example.com
bbb-repo1:
  members:
    - user3@example.com
    - user6@example.com
    - user7@example.com
    - user8@example.com

ccc-repo1:
  members:
    - user1@example.com
    - user1@example.com
